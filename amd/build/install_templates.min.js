define("block_modlib/install_templates",["jquery","core/config","core/str","core/modal_factory","core/modal_events"],(function($,config,str){return{init:function(){var execute=function(){$(".modlib-sections .dropdown-item").on("click",(function(){$(".modlib-modal").show(),0===$('input[class="template_section"]:checked').length?function(sectionId){var modules=[];$("input.template_module:checked").each((function(){var module={};module.sectionid=sectionId,module.cmid=$(this).attr("cmid"),module.name=$(this).attr("name"),module.type=$(this).attr("module_type"),modules.push(module)}));var data={};data.sectionid=sectionId,data.type="modules",data.payload=modules,callAjax(data)}($(this).attr("value")):function(sectionId){var sections=[];$("input.template_section:checked").each((function(){var section={};section.id=$(this).attr("sid"),section.name=$(this).attr("name"),sections.push(section)}));var data={};data.sectionid=sectionId,data.type="sections",data.payload=sections,callAjax(data)}($(this).attr("value"))}))},callAjax=function(data){var execUrl=config.wwwroot+"/blocks/modlib/ajax/install_templates.php";$.ajax({url:execUrl,type:"POST",data:{sectionid:data.sectionid,type:data.type,payload:data.payload},success:function(result){$("#modlib-modal-msg").html(result),location.reload()},error:function(){$(".modlib-modal").hide()}})},initFunctions=function(){$(".template_section").change((function(){var status=$(this).find("input").is(":checked"),sectionId=$(this).attr("sectionid");$('.template_module[sid = "'+sectionId+'"]').prop("checked",status);var getTheString="";0!==$("input.template_section:checked").length?($("input.template_module:checked:not([disabled])").prop("checked",!1),$('.template_module[sid = "'+sectionId+'"]').prop("checked",status),$("input.template_module").attr("disabled",""),$("#target_topic_btn").removeClass("disabled"),getTheString=str.get_string("select_section_after","block_modlib"),$.when(getTheString).done((function(theString){$("#target_topic_btn").html(theString)})),getTheString=str.get_string("select_section_after_mouseover","block_modlib"),$.when(getTheString).done((function(theString){$("#target_topic_btn").attr("title",theString)}))):($("input.template_module").removeAttr("disabled"),$("#target_topic_btn").addClass("disabled"),getTheString=str.get_string("select_section","block_modlib"),$.when(getTheString).done((function(theString){$("#target_topic_btn").html(theString)})),getTheString=str.get_string("select_section_mouseover","block_modlib"),$.when(getTheString).done((function(theString){$("#target_topic_btn").attr("title",theString)})))})),$(".module_row").on("click",(function(){0!==$("input.template_module:checked").length?$("#target_topic_btn").removeClass("disabled"):$("#target_topic_btn").addClass("disabled")})),execute()};$(document).ready((function(){initFunctions(),$("#modlib-spinner-modal").hide(),$("tr.module").css("cursor","pointer")}))}}}));

//# sourceMappingURL=install_templates.min.js.map